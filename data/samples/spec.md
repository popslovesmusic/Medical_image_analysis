# Module Specification

**Path:** data/samples
**Generated by:** Codex cleanup task
**Date:** 2025-10-31

Specification: Sample Data Layer

Module Path: data/samples/
Parent Specs:

data/spec.md (data hierarchy overview)

trainer/spec.md (pipeline ingestion and training integration)

core/diagnostics/spec.md (validation and metric testing)

I. Mission

The Sample Data Layer provides lightweight, fully deterministic datasets used for testing model pipelines, demonstrating system functionality, or validating diagnostic modules without requiring full medical datasets.

It ensures reproducibility and safety by using only synthetic, anonymized, or public-domain data sources.

Core objectives:

âš™ï¸ Integration Testing: Fast, small datasets for CI/CD and pipeline validation.

ğŸ§  Demonstration & Teaching: Visual, interpretable examples for internal documentation or research.

ğŸ§¬ Synthetic Modeling: Controlled noise and structure for validating chromatic and spectral transformations.

II. Directory Layout
data/samples/
â”œâ”€ public_examples/      # Small, open datasets (non-clinical)
â”‚  â”œâ”€ xray_chest_demo/
â”‚  â”œâ”€ retina_example/
â”‚  â””â”€ mri_brain_demo/
â”œâ”€ synthetic/            # Generated tensors or simulated scans
â”‚  â”œâ”€ chromatic/         # Synthetic ChromaticTensor sets
â”‚  â”œâ”€ spectral/          # Synthetic SpectralTensor sets
â”‚  â”œâ”€ masks/             # Generated segmentation masks
â”‚  â””â”€ metadata/          # Generator configs and seed logs
â”œâ”€ manifests/            # JSON linking sample lineage and parameters
â”œâ”€ scripts/              # Generation and validation scripts
â””â”€ logs/                 # Validation and reproducibility reports

III. Data Categories
1. Public Examples

Real but public-domain medical images (e.g., NIH Chest X-rays, DRIVE retinal images).

Stored as PNG or NIfTI for portability.

Used for UI, visualization, and educational notebooks.

Each dataset includes a LICENSE.txt or SPDX tag for traceability.

Naming Example:

xray_chest_demo_001.png

2. Synthetic Datasets

Artificially generated using controlled deterministic processes.

Used to validate Chromatic/Spectral conversions and tensor coherence.

Generators:

scripts/generate_synthetic_samples.py (noise-based, FFT-calibrated)

scripts/build_demo_tensors.py (creates matching Chromatic â†” Spectral pairs)

Deterministic Controls:

Parameter	Default	Description
seed	42	Fixed global seed for all synthetic runs
noise_level	0.05	Controlled Gaussian noise
shape	[256, 256, 3]	Fixed tensor dimension
color_distribution	Uniform	RGB â†’ HSL randomized uniformly in [0,1]
spectral_profile	Gaussian	Matches the bridge kernel specification

Output Naming Convention:

synthetic_<type>_<seed>_<index>.cten / .sten / .png

IV. Manifest Schema

Each sample batch generates a manifest:
data/samples/manifests/manifest_<date>.json

Example:

{
  "manifest_id": "2025-10-31T20:10:00Z",
  "type": "synthetic",
  "generator": "build_demo_tensors.py",
  "seed": 42,
  "entries": [
    {
      "uid": "synthetic_cten_00001",
      "tensor_path": "data/samples/synthetic/chromatic/synthetic_cten_00001.cten",
      "paired_spectral": "data/samples/synthetic/spectral/synthetic_sten_00001.sten",
      "checksum_crc64": "b71a4ffdb09e2b11",
      "params": { "noise_level": 0.05, "color_distribution": "uniform" }
    }
  ]
}


Manifests are validated by core/meta/chronicle.rs for:

Seed consistency

Path verification

CRC parity

Parameter determinism

V. Validation and Reproducibility

Validation routines run automatically after generation using
core/diagnostics/metrics.rs.

Metric	Description	Threshold
Î”tensor_roundtrip	Chromatic â†” Spectral reconstruction error	â‰¤ 1eâ»Â³
color_balance_drift	Mean RGB/HSL deviation from expected	â‰¤ 2%
fft_energy_balance	Energy drift in Gaussian kernel summation	â‰¤ 0.5 dB
manifest_valid	JSON schema verified	âœ…
reseed_stability	Re-run output identical	âœ…

Validation results stored in data/samples/logs/validation_<timestamp>.json.

VI. Usage Guidelines
Use Case	Consumer Module	Description
Unit Tests	core/tests/	Lightweight I/O validation
Bridge Testing	core/src/bridge/	Verify Chromatic â†” Spectral mapping
Trainer Dry Runs	trainer/src/training/	Validate tensor pipeline without clinical data
Documentation Notebooks	notebooks/	Visualization and pedagogical examples
Synthetic Augmentation Research	experiments/	Controlled morphology or contrast variations
VII. Ethical & Safety Rules

No patient-derived data in this directory.

Synthetic images must not mimic identifiable real scans.

Public datasets must include explicit license files.

All data must pass the anonymization verification in
core/diagnostics/metrics.rs::verify_no_phi().

VIII. Deterministic Generation Rules

All synthetic sample creation must adhere to deterministic reproducibility:

Rule	Description
Fixed seed (42)	All generators initialized identically
Sorted I/O order	Lexicographic file handling
Quantization control	Round floats to 1eâ»â¶ precision
Checksum tracking	CRC-64 recorded in manifest
Version lock	Generator version frozen per dataset
IX. Retention and Archiving
Category	Retention	Notes
Public Examples	Permanent	Reference datasets
Synthetic	Regenerated per release	Deterministic seed
Manifests	Permanent	Immutable
Logs	12 months	Auto-archived to /experiments/archive/
X. Compliance Summary
Field	Specification
Spec Version	1.0
Determinism Level	Full (bit-for-bit synthetic regeneration)
Seed Policy	Global deterministic seed (42)
Checksum	CRC-64/ISO
License Tracking	SPDX identifiers required
Audit Authority	Codex Synthetic Data Agent
Revision	{{auto-date}}
Status	âœ… Verified Safe and Reproducible